## DB 모델링

쇼핑몰을 열였다고 가정한다.

1. **전체적인 표 작성**

| 고객이름 | 출생년도 | 주소 | 연락처      | 구매한물건 | 가격 | 수량 |
| -------- | -------- | ---- | ----------- | ---------- | ---- | ---- |
| A        | 2000     | K    | 01011111111 |            |      |      |
| A        |          | K    | 01011111111 |            |      |      |
| B        |          | K    | 01011111111 |            |      |      |
| C        |          | K    | 01011111111 |            |      |      |
| D        |          | K    | 01011111111 |            |      |      |
| D        |          | K    | 01011111111 | !          | 1    | 10   |
| E        |          | K    | 01011111111 | +          | 2    | 5    |
| E        |          | K    | 01011111111 | @          | 3    | 6    |
| F        |          | K    | 01011111111 | -          | 1    | 7    |
| F        |          | K    | 01011111111 | #          | 1    | 8    |
| F        |          | K    | 01011111111 | ^          | 2    | 2    |
| G        |          | K    | 01011111111 | *          | 3    | 1    |
| H        |          | K    | 01011111111 | -          | 6    | 1    |
| I        |          | K    | 01011111111 | *          | 1    | 2    |

정렬도 했다. 이를 L자형 테이블이라고 부르는데 두 번째로 L자형 테이블을 분리한다.



2. **L자형 테이블 분리**

공간 절약을 위해 빈칸이 있는 곳과 없는 곳으로 분리한다. 그럼 테이블이 나뉘어지게된다.

| 고객이름 | 출생년도 | 주소 | 연락처      |
| -------- | -------- | ---- | ----------- |
| A        | 2000     | K    | 01011111111 |
| A        |          | K    | 01011111111 |
| B        |          | K    | 01011111111 |
| C        |          | K    | 01011111111 |
| D        |          | K    | 01011111111 |
| D        |          | K    | 01011111111 |
| E        |          | K    | 01011111111 |
| E        |          | K    | 01011111111 |
| F        |          | K    | 01011111111 |
| F        |          | K    | 01011111111 |
| F        |          | K    | 01011111111 |
| G        |          | K    | 01011111111 |
| H        |          | K    | 01011111111 |
| I        |          | K    | 01011111111 |

위처럼 고객 테이블과, 나머지인 구매 테이블로 나뉘어진다. 그런데 고객 테이블에 사람들이 **중복**된다. 정보는 하나만 남기면 된다.



3. **중복 제거**

| 고객이름 | 출생년도 | 주소 | 연락처      |
| -------- | -------- | ---- | ----------- |
| A        | 2000     | K    | 01011111111 |
| B        |          | K    | 01011111111 |
| C        |          | K    | 01011111111 |
| D        |          | K    | 01011111111 |
| E        |          | K    | 01011111111 |
| F        |          | K    | 01011111111 |
| G        |          | K    | 01011111111 |
| H        |          | K    | 01011111111 |
| I        |          | K    | 01011111111 |

그리고 각 행을 구분하는 값인 **기본키(PK)를 설정**해준다. 이름은 중복될 수 있으니 기본키로는 안 되고 회원 ID나 다른 것들이 적당하다.



4. **필요한 정보 추가**

구매테이블에서 지금 누가 구매했는지 알 수가 없다. 그러니까 구매 테이블에 고객 이름을 추가해준다. 

| 고객이름 | 구매한물건 | 가격 | 수량 |
| -------- | ---------- | ---- | ---- |
| D        | !          | 1    | 10   |
| E        | +          | 2    | 5    |
| E        | @          | 3    | 6    |
| F        | -          | 1    | 7    |
| F        | #          | 1    | 8    |
| F        | ^          | 2    | 2    |
| G        | *          | 3    | 1    |
| H        | -          | 6    | 1    |
| I        | *          | 1    | 2    |

이렇게 되면 두 테이블이 서로 연관될 정보가 생겼다. (FK)



5. **부모 자식 관계 설정**

구매 테이블만으로는 고객에게 배송을 할 수 없다. 고객 주소는 고객 테이블에 존재하기 때문이다. 

"고객은 물건을 소유한다." "물건은 고객을 소유한다."

전자가 자연스러우므로 고객테이블이 부모 테이블이 된다. (1:N관계)

FK로 두 테이블간 관계를 맺어준다. 부모 테이블의 기본 키가 자식 테이블의 외래 키가 된다. 

외래키를 가지고 부모 테이블로 가면 **유일하게 하나의 정보**를 얻을 수 있어야 한다.

> 제약조건
>
> 관계가 맺어진 후에는 자식 테이블의 FK 정보가 부모 테이블에 없으면 자식 테이블에 갱신할 수 없고 자식 테이블 정보를 삭제해야 부모 테이블 정보도 삭제할 수 있다.



6. **테이블 구조 정의**

int, char 등 구조를 정의한다.